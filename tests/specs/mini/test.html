<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=0">
  <title>test</title>
  <script src="../../../dist/sea.js"></script>
  <script src="../../test.js"></script>
</head>
<body>
<div id="out"></div>
<script>
  var seajs = define
  seajs.off = function(){}
  seajs.config = function(){}

  define('a', [], function() { return 'a' })
  define('b', ['c'], function(require) { var c = require('c'); return c })
  define('c', [], {})

  require(['test'], function(test) {
    require('a', function(a) {
      test.assert(a === 'a', 'a is a')
    })
    require('b', function(b) {
      test.assert(JSON.stringify(b) == '{}', 'b is {}')
    })
    require('c', function(c) {
      test.assert(JSON.stringify(c) == '{}', 'c is {}')
    })
    require(['b', 'c'], function(b, c) {
      test.assert(b === c, 'b is return c')
    })
    define('e', [], function(require, exports, module) {
      module.exports = 'e'
      setTimeout(function() {
        require.async('f')
      }, 1)
    })
    define('f', [], function(require) {
      test.assert(true, 'f is require.async')
      test.assert(require.resolve('e') === 'e', 'require.resolve(id) returns id')
      test.next()
    })
    require('e', function(e) {
      test.assert(e === 'e', 'e is e')
    })
    var req = require('e')
    test.assert(req === 'e', 'define.require("e") is e')
  })
</script>
</body>
</html>